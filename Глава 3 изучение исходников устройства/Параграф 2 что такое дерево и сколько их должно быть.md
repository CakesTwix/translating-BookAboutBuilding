# Параграф 2: что такое дерево и сколько их должно быть

Повторим определение из введения.

Дерево устройства - набор конфигурационных файлов (конфигов) разных форматов. В дереве прописываются различные пути, конфиги сборки, часто изменяющиеся конфиги, которые копируются в прошивку, исходники.

Обычно дерево лежит по пути device/vendor/devicecodename, где vendor - производитель, а devicecodename - кодовое имя устройства. Приведем пример для Xiaomi Redmi Note 4X- device/xiaomi/mido.

Но бывает такое, что устройства дико похожи по составляющей дерева и одинаковую часть попросту переносят в отдельное общее дерево - common. Для примера рассмотрим Asus ZenFone 2 Laser ZE500KL/KG и Asus ZenFone Max (Z010D).

Структура получается следующая - в папке device/asus лежат три дерева:

- Общее: msm8916-common
- Специфическое: Z00xD (объединенное дерево для Asus ZenFone 2 Laser ZE500KL и Asus ZenFone 2 Laser ZE500KG)
- Специфическое: Z010D

По итогу, вся база лежит в msm8916-common, а специфика лежит в специфичных деревьях.

[Ссылка на проект](https://github.com/Asus-MSM8916) с исходниками, бранч lineage-16.0.

Но самое смешное, что общих деревьев может быть еще больше!

Приведу пример для Sony Xperia Z3 Compact:

- device/sony/z3c
- device/sony/shinano-common
- device/sony/msm8974-common
- device/sony/common

4 дерева, которые друг за другом подключаются. Важно не профукать данную информацию, иначе будут потом непонятки почему на этапе инициализации сборки выпала ошибка.

Возникает все же резонный вопрос: не проще ли все-таки все в одно дерево "запихнуть" и не париться?

И я скажу Вам нет. На то есть две причины:

- Если другое устройство, на которое собирается прошивка, использует общие деревья, то сокращается количество действий, которое нужно совершить для сборки (работает в том случае, если собирается прошивка не с нуля)
- Много времени и сил занимает добавление одного коммита в целый ряд устройств, проще один коммит в одно дерево, в итоге изменение будет во всех устройствах, которые используют общее дерево

В итоге, получается только выгода. Похожую ситуацию мы увидим в вендоре.

И так, предлагаю посмотреть на конфигурационные файлы (конфиги), которые есть в дереве. Примером послужит дерево для mido от Zeelog. Они бывают разных типов.

lineage_mido.mk - файл описания прошивки, там хранится название устройства, отпечаток сборки, идет подключение к специфическим мейкфайлам

vendor_prop.mk, system.prop, product_prop.mk - пропы

device.mk - здесь собраны все библиотеки, программы, копирование файлов, которые нужны устройству

BoardConfig.mk - полное описание устройства

Android.mk - благодаря этому файлу папка с деревом видна и обычно там хранятся симлинки