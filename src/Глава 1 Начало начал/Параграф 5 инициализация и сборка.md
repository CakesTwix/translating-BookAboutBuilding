# Параграф 5: Инициализация и сборка

И вот мы переходим к самому ~~интересному~~, страшному и интригующему в этой главе - к сборке готовой прошивки!

Для начала требуется настроить окружение, что происходит посредством запуска скрипта build/envsetup.sh. Тут уместна шутка "есть два типа людей":

```bash
. build/envsetup.sh
```

```bash
source build/envsetup.sh
```

Да, это два варианта как запустить скрипт. Автор данного текста относит себя к первому типу людей.

Окей, теперь требуется указать системе сборки под какое устройство происходит сборка. Команда должна быть следующей:

```bash
lunch lineage_codename-userdebug
```

Где `codename` - кодовое название устройства. Не боимся, сидим и ждем, когда сделает все, что требуется системе сборки.

![Пример](images/12.png)



Отлично! Мы можем почитать почти всю информацию об устройстве, на которое собираем прошивку, и немного об ОС, которая стоит на машине для сборки. Теперь мы готовы собирать. И тут снова 2 варианта:

1) Сборка прошивки с использованием make и количеством потоков. Если не указывать количество потоков, то сборка будет происходить в однопоточном режиме

```bash
make bacon -j#
```

2) Сборка прошивки с использованием mka, он автоматически установит нужное количество потоков для сборки

```bash
mka bacon
```

В чем разница? Об этом нам скажет [Mirsaid02](https://4pda.to/forum/index.php?showuser=4383879) с 4PDA:

> **mka** - лучшая команда для сборки в плане качества, т.к использует программу sched_tool, при сборке будет возникать меньше ошибок, выбирает для каждой части сборки подходящий компилятор, но при этом сборка проходит на несколько часов дольше, в зависимости от ТХ вашего ПК или ноутбука, также его называют "супер-заряженной" версией make.
>
> [Пост](https://4pda.to/forum/index.php?showtopic=209610&view=findpost&p=44763389)
